# 更新日志

## [1.1.0] - 2025-09-22

### ✨ 新增功能

#### 🧠 智能用户选择缓存
- **智能排序**: 常用人员自动排在选择列表前面，标记⭐优先显示
- **自动预选**: 基于历史选择自动预选参与人员和审核人员
- **偏好记忆**: 记录不同文件类型的审查人员偏好，智能推荐
- **缓存管理**: 自动管理30天过期缓存，支持手动清理

#### 👤 自动创建人检测
- **首次配置**: 选择创建人后自动保存到本机配置文件
- **自动使用**: 后续创建时自动使用保存的创建人，跳过重复选择
- **安全验证**: 自动验证保存的用户是否仍在当前用户列表中
- **重新选择**: 支持清除保存的创建人信息，重新选择

#### 🚀 批量审查人员分配
- **统一分配**: 所有文件分配给同一审查人员（适合小规模变更）
- **按文件类型分配**: 根据.vue、.ts、.js等文件扩展名智能分配
- **按目录结构分配**: 根据components、utils、pages等目录智能分配
- **逐个文件选择**: 保留传统的逐个选择模式
- **批量预览**: 分配完成后显示预览，支持确认、重试或取消
- **个别调整**: 批量分配后支持对特定文件进行微调
- **智能推荐**: 基于历史使用记录推荐最合适的审查人员

#### 📊 增强的调试工具
- **缓存状态查看**: `fiter debug cache` - 显示用户选择缓存的详细统计
- **用户信息管理**: `fiter debug user` - 查看和管理保存的创建人信息
- **完全重置功能**: `fiter debug reset` - 清空所有缓存和配置，重新初始化
- **清理选项**: 支持交互式确认或直接重置（--confirm）

### 🔧 优化改进

#### 用户体验优化
- **重试机制**: 批量分配预览阶段拒绝后可重新选择分配方式，而不是直接退出
- **强制确认**: CR申请单创建前必须手动输入yes/no确认，防止误操作
- **界面清洁**: 移除创建迭代时的技术调试信息，保持界面简洁
- **智能排序**: 所有人员选择列表都按使用频率智能排序

#### 性能优化
- **本地缓存**: 用户选择历史保存在本地，避免重复网络请求
- **智能预选**: 减少用户点击次数，提升操作效率
- **批量处理**: 多文件审查人员分配从逐个选择改为批量处理

### 🗂️ 技术架构

#### 新增模块
- **UserCacheManager**: 用户选择缓存管理器，处理历史记录和智能推荐
- **UserDetector**: 用户检测器，管理创建人自动选择功能
- **BatchReviewerAssignment**: 批量审查人员分配器，支持多种分配策略

#### 缓存系统
- **存储位置**: `~/.fshows/user-cache.json` - 用户选择历史
- **存储位置**: `~/.fshows/current-user.json` - 保存的创建人信息
- **过期机制**: 30天自动过期，定期清理无效数据
- **数据结构**: JSON格式存储，包含用户ID、姓名、使用频率等信息

#### 兼容性改进
- **ES模块支持**: 修复fs-extra和inquirer在ES模块环境下的导入问题
- **TypeScript类型**: 完善所有新功能的TypeScript类型定义
- **错误处理**: 增强错误处理机制，提供友好的错误提示

### 📚 文档更新
- 更新README.md，添加新功能说明和智能特性介绍
- 更新使用指南，新增"🚀 新功能特性"章节
- 完善debug命令的子命令说明
- 添加批量分配和缓存管理的使用技巧

### 🔧 开发相关
- 版本号升级至v1.1.0
- 新增3个工具类文件
- 重构create和debug命令的核心逻辑
- 优化构建流程和错误处理

---

## [1.0.0] - 2025-09-18

### 🎉 首次发布
- 基础迭代创建和管理功能
- 智能Git差异分析
- CR申请单生成
- 多项目支持
- 配置管理系统
- 调试和诊断工具

---

## 贡献指南

如需贡献代码或报告问题，请访问：
- **问题反馈**: [GitHub Issues](https://github.com/ursazoo/iteration-cli/issues)
- **使用文档**: [使用指南](./docs/使用指南.md)

感谢所有贡献者的支持！🙏
